@model MyBlog.PresentationLayer.Models.AdminPanelViewModel

@{
    ViewData["Title"] = "Admin Paneli";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<style>
    .ap-card {
        border-radius: 16px;
        box-shadow: 0 4px 32px 0 rgba(38,99,235,0.11);
        border: none;
        margin-bottom: 32px;
        overflow: hidden;
    }

    .ap-header {
        background: linear-gradient(90deg, #2563eb 0%, #1e293b 100%);
        color: #fff;
        padding: 20px 32px 14px 32px;
        font-size: 1.19em;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

        .ap-header .btn {
            background: #fff;
            color: #2563eb;
            border: none;
            font-weight: 600;
            transition: background .15s;
        }

            .ap-header .btn:hover {
                background: #dbeafe;
                color: #1e293b;
            }

    .ap-table th {
        background: #f1f5f9;
        font-weight: bold;
        color: #2563eb;
    }

    .ap-table td {
        background: #fff;
    }

    .ap-table .btn {
        padding: 0.3rem 0.7rem;
        font-size: 1em;
        border-radius: 7px;
    }

    .ap-table .btn-primary {
        background: #2563eb;
        border: none;
    }

        .ap-table .btn-primary:hover {
            background: #1e40af;
        }

    .ap-table .btn-danger {
        background: #f43f5e;
        border: none;
    }

        .ap-table .btn-danger:hover {
            background: #b91c1c;
        }
    
</style>

<div class="container py-4">

    <div class="ap-card">
        <div class="ap-header">
            <span><i class="fa-solid fa-diagram-project"></i> Projeler</span>
            <a href="@Url.Action("Create", "Admin")" class="btn btn-light shadow-sm">
                <i class="fa fa-plus"></i> Yeni Proje Ekle
            </a>
        </div>
        <div class="table-responsive">
            <table class="table ap-table table-bordered table-hover mb-0 align-middle">
                <thead>
                    <tr>
                        <th>Başlık</th>
                        <th>Açıklama</th>
                        <th>Link</th>
                        <th style="width:120px;">İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Projects != null && Model.Projects.Any())
                    {
                        foreach (var item in Model.Projects)
                        {
                            <tr>
                                <td>@item.Title</td>
                                <td>@item.Description</td>
                                <td>
                                    @if (!string.IsNullOrEmpty(item.Link))
                                    {
                                        <a href="@item.Link" class="btn btn-sm btn-outline-primary" target="_blank">
                                            <i class="fa-solid fa-arrow-up-right-from-square"></i> Git
                                        </a>
                                    }
                                </td>
                                <td>
                                    <a href="@Url.Action("Edit", new { id = item.Id })" class="btn btn-sm btn-primary me-1" title="Düzenle">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                    <a href="@Url.Action("Delete", new { id = item.Id })" class="btn btn-sm btn-danger" title="Sil">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr><td colspan="4">Henüz ekli proje yok.</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="ap-card">
        <div class="ap-header">
            <span><i class="fa-solid fa-envelope"></i> Ziyaretçi Mesajları</span>
        </div>
        <div class="table-responsive">
            <table class="table ap-table table-bordered table-hover mb-0 align-middle">
                <thead>
                    <tr>
                        <th>Ad Soyad</th>
                        <th>E-posta</th>
                        <th>Mesaj</th>
                        <th>Tarih</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Messages != null && Model.Messages.Any())
                    {
                        foreach (var msg in Model.Messages)
                        {
                            <tr>
                                <td>@msg.Name</td>
                                <td>@msg.Email</td>
                                <td>@msg.Content</td>
                                <td>@msg.SentAt.ToString("dd.MM.yyyy HH:mm")</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr><td colspan="4">Henüz mesaj yok.</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

</div>
